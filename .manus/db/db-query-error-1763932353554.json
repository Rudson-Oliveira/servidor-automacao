{
  "query": "INSERT INTO skills (\n  nome,\n  descricao,\n  instrucoes,\n  exemplo,\n  tags,\n  categoria,\n  autonomiaNivel\n) VALUES (\n  'Analisar Website',\n  'Analisa websites usando a API DeepSITE: faz scraping de conte√∫do, extrai metadados, analisa com IA, gera resumos e gerencia cache. Ideal para pesquisa de concorrentes, an√°lise de conte√∫do e extra√ß√£o de dados.',\n  '# Skill: Analisar Website com API DeepSITE\n\n## Endpoints Dispon√≠veis\n\n### 1. POST /api/deepsite/scrape\nFaz scraping b√°sico de uma URL com caching autom√°tico.\n\n**Quando usar:**\n- Extrair HTML completo de uma p√°gina\n- Obter metadados (title, description, og:tags)\n- Capturar conte√∫do para an√°lise posterior\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\",\n  \"options\": {\n    \"useCache\": true,\n    \"extractMetadata\": true,\n    \"followRedirects\": true,\n    \"timeout\": 30000\n  }\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"url\": \"https://example.com\",\n    \"html\": \"<html>...</html>\",\n    \"metadata\": {\n      \"title\": \"Example Domain\",\n      \"description\": \"Example website\",\n      \"keywords\": [\"example\"],\n      \"ogImage\": \"https://example.com/image.jpg\"\n    },\n    \"scrapedAt\": \"2025-11-23T15:30:00Z\",\n    \"fromCache\": false,\n    \"responseTime\": 1234\n  }\n}\n```\n\n---\n\n### 2. POST /api/deepsite/analyze\nAn√°lise completa de conte√∫do com IA (LLM).\n\n**Quando usar:**\n- Entender o conte√∫do de uma p√°gina\n- Classificar tipo de website\n- Detectar idioma e sentimento\n- Extrair entidades\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\",\n  \"analysisType\": \"full\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"analysis\": {\n    \"url\": \"https://example.com\",\n    \"summary\": \"Este website √© um exemplo...\",\n    \"category\": \"informational\",\n    \"language\": \"en\",\n    \"sentiment\": \"neutral\",\n    \"confidence\": 95,\n    \"analyzedAt\": \"2025-11-23T15:30:00Z\"\n  }\n}\n```\n\n---\n\n### 3. POST /api/deepsite/summarize\nGera resumo autom√°tico do conte√∫do.\n\n**Quando usar:**\n- Resumir artigos longos\n- Extrair pontos principais\n- Gerar descri√ß√µes curtas\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com/article\",\n  \"maxLength\": 200,\n  \"language\": \"pt-BR\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"summary\": \"Este artigo discute...\",\n  \"originalLength\": 5000,\n  \"summaryLength\": 180,\n  \"compressionRatio\": 0.036\n}\n```\n\n---\n\n### 4. POST /api/deepsite/validate-url\nValida URL antes de fazer scraping.\n\n**Quando usar:**\n- Verificar se URL √© v√°lida\n- Evitar erros de scraping\n- Validar input do usu√°rio\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"valid\": true,\n  \"sanitizedUrl\": \"https://example.com/\",\n  \"domain\": \"example.com\"\n}\n```\n\n---\n\n### 5. GET /api/deepsite/cache/:url\nVerifica se URL est√° em cache.\n\n**Quando usar:**\n- Verificar se scraping j√° foi feito\n- Economizar tempo de processamento\n\n**Exemplo:**\nGET /api/deepsite/cache/https%3A%2F%2Fexample.com\n\n---\n\n### 6. DELETE /api/deepsite/cache/:url\nLimpa cache de URL espec√≠fica.\n\n**Quando usar:**\n- For√ßar novo scraping\n- Atualizar conte√∫do desatualizado\n\n---\n\n### 7. GET /api/deepsite/status\nVerifica status do sistema DeepSITE.\n\n**Quando usar:**\n- Verificar se API est√° online\n- Ver estat√≠sticas de cache\n- Monitorar performance\n\n---\n\n## Fluxo de Trabalho Recomendado\n\n### Caso 1: An√°lise Completa de Website\n```\n1. Validar URL (POST /validate-url)\n2. Fazer scraping (POST /scrape)\n3. Analisar conte√∫do (POST /analyze)\n4. Apresentar resultados ao usu√°rio\n```\n\n### Caso 2: Resumo R√°pido\n```\n1. Validar URL (POST /validate-url)\n2. Gerar resumo direto (POST /summarize)\n3. Apresentar resumo ao usu√°rio\n```\n\n### Caso 3: Extra√ß√£o de Metadados\n```\n1. Fazer scraping com extractMetadata=true (POST /scrape)\n2. Extrair metadata da resposta\n3. Apresentar metadados ao usu√°rio\n```\n\n---\n\n## Tratamento de Erros\n\n### Erro 400 - Bad Request\n**Causa:** URL inv√°lida ou par√¢metros faltando\n**Solu√ß√£o:** Validar URL antes de fazer scraping\n\n### Erro 500 - Internal Server Error\n**Causa:** Falha no scraping (timeout, site offline, etc)\n**Solu√ß√£o:** Informar usu√°rio e sugerir tentar novamente\n\n### Cache Miss\n**Causa:** URL n√£o est√° em cache\n**Solu√ß√£o:** Normal, sistema far√° scraping automaticamente\n\n---\n\n## Limita√ß√µes\n\n1. **Timeout:** 30 segundos por requisi√ß√£o\n2. **Batch:** M√°ximo 50 URLs por vez\n3. **Cache TTL:** 1 hora para scrapes, 7 dias para an√°lises\n4. **Bloqueios:** IPs locais (localhost, 127.0.0.1, 192.168.x.x) s√£o bloqueados\n5. **Protocolos:** Apenas HTTP e HTTPS s√£o permitidos\n\n---\n\n## Dicas de Uso\n\n1. **Sempre validar URL primeiro** para evitar erros\n2. **Usar cache quando poss√≠vel** para economizar tempo\n3. **Limpar cache se conte√∫do mudou** recentemente\n4. **Usar an√°lise IA para conte√∫do complexo** (artigos, blogs)\n5. **Usar resumo para conte√∫do longo** (> 5000 caracteres)\n6. **Verificar status antes de opera√ß√µes em lote**\n\n---\n\n## Exemplos Pr√°ticos\n\n### Exemplo 1: Analisar Concorrente\n```\nUsu√°rio: \"Analise o site https://competitor.com\"\n\nA√ß√£o:\n1. POST /api/deepsite/validate-url {\"url\": \"https://competitor.com\"}\n2. POST /api/deepsite/analyze {\"url\": \"https://competitor.com\"}\n3. Apresentar: categoria, resumo, sentimento\n```\n\n### Exemplo 2: Resumir Artigo\n```\nUsu√°rio: \"Resuma este artigo: https://blog.com/article\"\n\nA√ß√£o:\n1. POST /api/deepsite/summarize {\"url\": \"https://blog.com/article\", \"maxLength\": 200}\n2. Apresentar resumo ao usu√°rio\n```\n\n### Exemplo 3: Extrair Metadados\n```\nUsu√°rio: \"Quais s√£o os metadados de https://example.com?\"\n\nA√ß√£o:\n1. POST /api/deepsite/scrape {\"url\": \"https://example.com\", \"options\": {\"extractMetadata\": true}}\n2. Extrair metadata.title, metadata.description, metadata.ogImage\n3. Apresentar metadados formatados\n```',\n  '**Exemplo de Uso:**\n\nUsu√°rio: \"Analise o site https://www.example.com e me diga do que se trata\"\n\n**Passo 1 - Validar URL:**\nPOST /api/deepsite/validate-url\nBody: {\"url\": \"https://www.example.com\"}\n\n**Passo 2 - Analisar com IA:**\nPOST /api/deepsite/analyze\nBody: {\"url\": \"https://www.example.com\", \"analysisType\": \"full\"}\n\n**Passo 3 - Apresentar Resultado:**\n\"Analisei o site https://www.example.com:\n\nüìä **Categoria:** Informacional\nüåê **Idioma:** Ingl√™s (en)\nüí≠ **Sentimento:** Neutro\nüìù **Resumo:** Este website √© um dom√≠nio de exemplo usado para fins de documenta√ß√£o e testes. Ele fornece informa√ß√µes b√°sicas sobre o conceito de dom√≠nios na internet.\n‚úÖ **Confian√ßa:** 95%\"',\n  'deepsite,scraping,web,analise,ia,website,metadados,resumo,cache',\n  'An√°lise Web',\n  'alta'\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 46yA7HaDwBP5MYq.c5fbe4e16cff --database ALEjofy2PjgFnShwZRqCD7 --execute INSERT INTO skills (\n  nome,\n  descricao,\n  instrucoes,\n  exemplo,\n  tags,\n  categoria,\n  autonomiaNivel\n) VALUES (\n  'Analisar Website',\n  'Analisa websites usando a API DeepSITE: faz scraping de conte√∫do, extrai metadados, analisa com IA, gera resumos e gerencia cache. Ideal para pesquisa de concorrentes, an√°lise de conte√∫do e extra√ß√£o de dados.',\n  '# Skill: Analisar Website com API DeepSITE\n\n## Endpoints Dispon√≠veis\n\n### 1. POST /api/deepsite/scrape\nFaz scraping b√°sico de uma URL com caching autom√°tico.\n\n**Quando usar:**\n- Extrair HTML completo de uma p√°gina\n- Obter metadados (title, description, og:tags)\n- Capturar conte√∫do para an√°lise posterior\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\",\n  \"options\": {\n    \"useCache\": true,\n    \"extractMetadata\": true,\n    \"followRedirects\": true,\n    \"timeout\": 30000\n  }\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"url\": \"https://example.com\",\n    \"html\": \"<html>...</html>\",\n    \"metadata\": {\n      \"title\": \"Example Domain\",\n      \"description\": \"Example website\",\n      \"keywords\": [\"example\"],\n      \"ogImage\": \"https://example.com/image.jpg\"\n    },\n    \"scrapedAt\": \"2025-11-23T15:30:00Z\",\n    \"fromCache\": false,\n    \"responseTime\": 1234\n  }\n}\n```\n\n---\n\n### 2. POST /api/deepsite/analyze\nAn√°lise completa de conte√∫do com IA (LLM).\n\n**Quando usar:**\n- Entender o conte√∫do de uma p√°gina\n- Classificar tipo de website\n- Detectar idioma e sentimento\n- Extrair entidades\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\",\n  \"analysisType\": \"full\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"analysis\": {\n    \"url\": \"https://example.com\",\n    \"summary\": \"Este website √© um exemplo...\",\n    \"category\": \"informational\",\n    \"language\": \"en\",\n    \"sentiment\": \"neutral\",\n    \"confidence\": 95,\n    \"analyzedAt\": \"2025-11-23T15:30:00Z\"\n  }\n}\n```\n\n---\n\n### 3. POST /api/deepsite/summarize\nGera resumo autom√°tico do conte√∫do.\n\n**Quando usar:**\n- Resumir artigos longos\n- Extrair pontos principais\n- Gerar descri√ß√µes curtas\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com/article\",\n  \"maxLength\": 200,\n  \"language\": \"pt-BR\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"success\": true,\n  \"summary\": \"Este artigo discute...\",\n  \"originalLength\": 5000,\n  \"summaryLength\": 180,\n  \"compressionRatio\": 0.036\n}\n```\n\n---\n\n### 4. POST /api/deepsite/validate-url\nValida URL antes de fazer scraping.\n\n**Quando usar:**\n- Verificar se URL √© v√°lida\n- Evitar erros de scraping\n- Validar input do usu√°rio\n\n**Requisi√ß√£o:**\n```json\n{\n  \"url\": \"https://example.com\"\n}\n```\n\n**Resposta de Sucesso:**\n```json\n{\n  \"valid\": true,\n  \"sanitizedUrl\": \"https://example.com/\",\n  \"domain\": \"example.com\"\n}\n```\n\n---\n\n### 5. GET /api/deepsite/cache/:url\nVerifica se URL est√° em cache.\n\n**Quando usar:**\n- Verificar se scraping j√° foi feito\n- Economizar tempo de processamento\n\n**Exemplo:**\nGET /api/deepsite/cache/https%3A%2F%2Fexample.com\n\n---\n\n### 6. DELETE /api/deepsite/cache/:url\nLimpa cache de URL espec√≠fica.\n\n**Quando usar:**\n- For√ßar novo scraping\n- Atualizar conte√∫do desatualizado\n\n---\n\n### 7. GET /api/deepsite/status\nVerifica status do sistema DeepSITE.\n\n**Quando usar:**\n- Verificar se API est√° online\n- Ver estat√≠sticas de cache\n- Monitorar performance\n\n---\n\n## Fluxo de Trabalho Recomendado\n\n### Caso 1: An√°lise Completa de Website\n```\n1. Validar URL (POST /validate-url)\n2. Fazer scraping (POST /scrape)\n3. Analisar conte√∫do (POST /analyze)\n4. Apresentar resultados ao usu√°rio\n```\n\n### Caso 2: Resumo R√°pido\n```\n1. Validar URL (POST /validate-url)\n2. Gerar resumo direto (POST /summarize)\n3. Apresentar resumo ao usu√°rio\n```\n\n### Caso 3: Extra√ß√£o de Metadados\n```\n1. Fazer scraping com extractMetadata=true (POST /scrape)\n2. Extrair metadata da resposta\n3. Apresentar metadados ao usu√°rio\n```\n\n---\n\n## Tratamento de Erros\n\n### Erro 400 - Bad Request\n**Causa:** URL inv√°lida ou par√¢metros faltando\n**Solu√ß√£o:** Validar URL antes de fazer scraping\n\n### Erro 500 - Internal Server Error\n**Causa:** Falha no scraping (timeout, site offline, etc)\n**Solu√ß√£o:** Informar usu√°rio e sugerir tentar novamente\n\n### Cache Miss\n**Causa:** URL n√£o est√° em cache\n**Solu√ß√£o:** Normal, sistema far√° scraping automaticamente\n\n---\n\n## Limita√ß√µes\n\n1. **Timeout:** 30 segundos por requisi√ß√£o\n2. **Batch:** M√°ximo 50 URLs por vez\n3. **Cache TTL:** 1 hora para scrapes, 7 dias para an√°lises\n4. **Bloqueios:** IPs locais (localhost, 127.0.0.1, 192.168.x.x) s√£o bloqueados\n5. **Protocolos:** Apenas HTTP e HTTPS s√£o permitidos\n\n---\n\n## Dicas de Uso\n\n1. **Sempre validar URL primeiro** para evitar erros\n2. **Usar cache quando poss√≠vel** para economizar tempo\n3. **Limpar cache se conte√∫do mudou** recentemente\n4. **Usar an√°lise IA para conte√∫do complexo** (artigos, blogs)\n5. **Usar resumo para conte√∫do longo** (> 5000 caracteres)\n6. **Verificar status antes de opera√ß√µes em lote**\n\n---\n\n## Exemplos Pr√°ticos\n\n### Exemplo 1: Analisar Concorrente\n```\nUsu√°rio: \"Analise o site https://competitor.com\"\n\nA√ß√£o:\n1. POST /api/deepsite/validate-url {\"url\": \"https://competitor.com\"}\n2. POST /api/deepsite/analyze {\"url\": \"https://competitor.com\"}\n3. Apresentar: categoria, resumo, sentimento\n```\n\n### Exemplo 2: Resumir Artigo\n```\nUsu√°rio: \"Resuma este artigo: https://blog.com/article\"\n\nA√ß√£o:\n1. POST /api/deepsite/summarize {\"url\": \"https://blog.com/article\", \"maxLength\": 200}\n2. Apresentar resumo ao usu√°rio\n```\n\n### Exemplo 3: Extrair Metadados\n```\nUsu√°rio: \"Quais s√£o os metadados de https://example.com?\"\n\nA√ß√£o:\n1. POST /api/deepsite/scrape {\"url\": \"https://example.com\", \"options\": {\"extractMetadata\": true}}\n2. Extrair metadata.title, metadata.description, metadata.ogImage\n3. Apresentar metadados formatados\n```',\n  '**Exemplo de Uso:**\n\nUsu√°rio: \"Analise o site https://www.example.com e me diga do que se trata\"\n\n**Passo 1 - Validar URL:**\nPOST /api/deepsite/validate-url\nBody: {\"url\": \"https://www.example.com\"}\n\n**Passo 2 - Analisar com IA:**\nPOST /api/deepsite/analyze\nBody: {\"url\": \"https://www.example.com\", \"analysisType\": \"full\"}\n\n**Passo 3 - Apresentar Resultado:**\n\"Analisei o site https://www.example.com:\n\nüìä **Categoria:** Informacional\nüåê **Idioma:** Ingl√™s (en)\nüí≠ **Sentimento:** Neutro\nüìù **Resumo:** Este website √© um dom√≠nio de exemplo usado para fins de documenta√ß√£o e testes. Ele fornece informa√ß√µes b√°sicas sobre o conceito de dom√≠nios na internet.\n‚úÖ **Confian√ßa:** 95%\"',\n  'deepsite,scraping,web,analise,ia,website,metadados,resumo,cache',\n  'An√°lise Web',\n  'alta'\n);",
  "returncode": 1,
  "logs": [
    "ERROR 1054 (42S22) at line 1: Unknown column 'autonomiaNivel' in 'field list'"
  ]
}